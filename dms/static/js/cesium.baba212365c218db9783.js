webpackJsonp([2],{offP:function(e,r){function a(e){throw new Error("Cannot find module '"+e+"'.")}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id="offP"},usdR:function(e,r,a){"use strict";var t=a("0HpB"),i=a.n(t),o=a("2uFj"),s=a("gyMJ"),n={ImageryProvider:{sl:new i.a.UrlTemplateImageryProvider({url:"http://{s}.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],credit:"sl",tilingScheme:new i.a.WebMercatorTilingScheme}),sl_cn:new i.a.UrlTemplateImageryProvider({url:"http://{s}.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],credit:"sl_cn",tilingScheme:new i.a.WebMercatorTilingScheme}),yx:new i.a.UrlTemplateImageryProvider({url:"http://{s}.tianditu.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new i.a.WebMercatorTilingScheme,credit:"yx"}),yx_cn:new i.a.UrlTemplateImageryProvider({url:"http://{s}.tianditu.com/DataServer?T=cia_w&x={x}&y={y}&l={z}",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],credit:"yx_cn",tilingScheme:new i.a.WebMercatorTilingScheme}),dms_sldt:new i.a.WebMapServiceImageryProvider({url:o.a.geowebcacheUrl,tilingScheme:new i.a.WebMercatorTilingScheme,parameters:{srs:"EPSG:3857",EXCEPTIONS:"application/vnd.ogc.se_inimage"},enablePickFeatures:!1,credit:"dms_sldt",layers:"dms_sldt",srs:"EPSG:3857"})},terrainProvider:{ct:new i.a.CesiumTerrainProvider({url:"https://www.supermapol.com/iserver/services/3D-stk_terrain/rest/realspace/datas/info/data/path/"}),skt_cn:new i.a.CesiumTerrainProvider({url:"//assets02.agi.com/stk-terrain/world",requestWaterMask:!0,requestVertexNormals:!0})}},c={moveRate:0,viewer:null,options:{animation:!1,timeline:!1,baseLayerPicker:!1,navigationHelpButton:!1,sceneModePicker:!1,scene3DOnly:!1,geocoder:!1,fullscreenButton:!1,homeButton:!1,imageryProvider:n.ImageryProvider.google,terrainProvider:n.terrainProvider.skt_cn},init:function(e){e.camera.percentageChanged=.01,e._cesiumWidget._creditContainer.style.display="none",e.cesiumWidget.screenSpaceEventHandler.removeInputAction(i.a.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.viewer=e,e.clock.onTick.addEventListener(this.onTick,e),this.viewer.camera.setView({destination:i.a.Cartesian3.fromDegrees(108.45,23.48,5e4)}),this.addImageryProvider(n.ImageryProvider.yx_cn),this.addImageryProvider(n.ImageryProvider.dms_sldt)},flyToViewer:function(e,r,a){this.viewer.camera.flyTo({destination:i.a.Cartesian3.fromDegrees(e,r,a)})},imageryProviderToggle:function(e){if(e!==this.viewer.imageryLayers._layers[0].imageryProvider.credit.html)switch(e){case"sl":this.addImageryProvider(n.ImageryProvider.sl),this.addImageryProvider(n.ImageryProvider.sl_cn);break;case"yx":this.addImageryProvider(n.ImageryProvider.yx),this.addImageryProvider(n.ImageryProvider.yx_cn)}},addImageryProvider:function(e){var r=this.viewer,a=void 0;"yx"==e.credit.html||"sl"==e.credit.html?(r.imageryLayers.remove(r.imageryLayers.get(0)),a=r.imageryLayers.addImageryProvider(e,0),r.imageryLayers.lowerToBottom(a)):"yx_cn"==e.credit.html||"sl_cn"==e.credit.html?(r.imageryLayers.remove(r.imageryLayers.get(1)),a=r.imageryLayers.addImageryProvider(e,1)):(a=r.imageryLayers.addImageryProvider(e),r.imageryLayers.raiseToTop(a))},onTick:function(e){var r=this.scene.globe.ellipsoid.cartesianToCartographic(this.camera.position).height;c.moveRate=r/100},computedMapSourceFlag:function(e){var r=this;return e.forEach(function(e,a){e.val===r.viewer.imageryLayers._layers[0].imageryProvider.credit.html&&(e.flag=!0)}),e},searchImageryLayers:function(e){var r=void 0;return this.viewer.imageryLayers._layers.forEach(function(a,t){a.imageryProvider.credit.html===e&&(r=a)}),r},searchDataSources:function(e){var r=void 0;return this.viewer.dataSources._dataSources.forEach(function(a,t){a.name===e&&(r=a)}),r},checkLayer:function(e){var r=this.searchImageryLayers(e.layer),a=this.searchDataSources(e.layer);e.checked?r?(r.show=!0,a&&(a.show=!0)):"geoserver"==e.type?this.addkGeoserver(e):"geowebcache"==e.type&&(e.wfsLayer?a||(this.addkGeoWebcache(e),this.addtWfs(e)):this.addkGeoWebcache(e)):(r&&(r.show=!1),a&&(a.show=!1))},addkGeoserver:function(e){this.addImageryProvider(new i.a.WebMapServiceImageryProvider({url:o.a.geoserverUrl+o.a.geoserverDmsWms,layers:o.a.geoserverJob+":"+e.layer,credit:e.layer,enablePickFeatures:!1,parameters:{service:"WMS",format:"image/png",transparent:!0}}))},addkGeoWebcache:function(e){this.addImageryProvider(new i.a.WebMapServiceImageryProvider({url:o.a.geowebcacheUrl,tilingScheme:new i.a.WebMercatorTilingScheme,parameters:{srs:"EPSG:3857",EXCEPTIONS:"application/vnd.ogc.se_inimage"},enablePickFeatures:!1,credit:e.layer,layers:e.layer,srs:"EPSG:3857"}))},addtWfs:function(e){var r=this;s.a.getWfs({service:"WFS",version:"1.0.0",typeName:o.a.geoserverJob+":"+e.wfsLayer,request:"GetFeature",outputFormat:"application/json"}).then(function(a){200===a.status&&r.loadGeojson(a.data,e)}).catch(function(e){alert(e)})},loadGeojson:function(e,r){var t=this.viewer,o=new i.a.GeoJsonDataSource(r.layer);t.dataSources.add(o.load(e,{clampToGround:!0})).then(function(e){for(var r=0;r<t.dataSources.length;r++)for(var o=0;o<t.dataSources._dataSources[r].entities.values.length;o++)t.dataSources._dataSources[r].entities.values[o].billboard=new i.a.BillboardGraphics({image:a("NDGd"),show:!0,color:i.a.Color.WHITE,disableDepthTestDistance:Number.POSITIVE_INFINITY,heightReference:i.a.HeightReference.CLAMP_TO_GROUND,distanceDisplayCondition:new i.a.DistanceDisplayCondition(1100,5e5),width:32,height:32})})}};r.a=c},vZf5:function(e,r){},zP25:function(e,r){function a(e){throw new Error("Cannot find module '"+e+"'.")}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id="zP25"}});